title Tronador Workflow

actor Developer
participant Code Repo
participant Tekton
participant Image Registry
participant GitOps Repo
participant Argo
participant K8s Cluster
participant Tronador
participant Helm Controller
participant Tenant Operator

Developer->Code Repo: git push
Developer->Code Repo: create pull request
Code Repo->Tekton: SCM event
Tekton->Image Registry: upload\nsnapshot image
note over Tekton: create EP CR
Tekton->GitOps Repo: push EP CR
note over GitOps Repo,Argo,K8s Cluster: <- sync EP CR ->
Tronador->K8s Cluster: watch EP
Tronador->+K8s Cluster: create\nPR namespace
Tronador->K8s Cluster: create\nhelm release
Helm Controller->K8s Cluster: watch helm\nrelease
Helm Controller->K8s Cluster: create deployment
Tenant Operator->K8s Cluster: sync image registry secrets
Image Registry->K8s Cluster: pull application snapshot image
note over K8s Cluster: environment provisioning\n           completed

